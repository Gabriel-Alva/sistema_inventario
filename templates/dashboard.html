{% extends 'base.html' %}
{% block title %}Dashboard{% endblock %}
{% block content %}
<div class="row g-4 mb-4">
  <div class="col-6 col-md-2">
    <div class="card shadow-sm border-0 text-center h-100">
      <div class="card-body">
        <div class="mb-2">
          <svg width="32" height="32" fill="none" stroke="#1de9b6" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="8" r="4"/><path d="M4 20c0-4 8-4 8-4s8 0 8 4"/></svg>
        </div>
        <h5 class="card-title">Usuarios</h5>
        <h2 class="fw-bold">{{ resumen.usuarios }}</h2>
      </div>
    </div>
  </div>
  <div class="col-6 col-md-2">
    <div class="card shadow-sm border-0 text-center h-100">
      <div class="card-body">
        <div class="mb-2">
          <svg width="32" height="32" fill="none" stroke="#ff7043" stroke-width="2" viewBox="0 0 24 24"><rect x="3" y="7" width="18" height="13" rx="2"/><path d="M16 3v4M8 3v4"/></svg>
        </div>
        <h5 class="card-title">Categorías</h5>
        <h2 class="fw-bold">{{ resumen.categorias }}</h2>
      </div>
    </div>
  </div>
  <div class="col-6 col-md-2">
    <div class="card shadow-sm border-0 text-center h-100">
      <div class="card-body">
        <div class="mb-2">
          <svg width="32" height="32" fill="none" stroke="#7e57c2" stroke-width="2" viewBox="0 0 24 24"><rect x="3" y="7" width="18" height="13" rx="2"/><path d="M16 3v4M8 3v4"/></svg>
        </div>
        <h5 class="card-title">Proveedores</h5>
        <h2 class="fw-bold">{{ resumen.proveedores }}</h2>
      </div>
    </div>
  </div>
  <div class="col-6 col-md-2">
    <div class="card shadow-sm border-0 text-center h-100">
      <div class="card-body">
        <div class="mb-2">
          <svg width="32" height="32" fill="none" stroke="#42a5f5" stroke-width="2" viewBox="0 0 24 24"><rect x="3" y="7" width="18" height="13" rx="2"/><path d="M16 3v4M8 3v4"/></svg>
        </div>
        <h5 class="card-title">Productos</h5>
        <h2 class="fw-bold">{{ resumen.productos }}</h2>
      </div>
    </div>
  </div>
  <div class="col-6 col-md-2">
    <div class="card shadow-sm border-0 text-center h-100">
      <div class="card-body">
        <div class="mb-2">
          <svg width="32" height="32" fill="none" stroke="#ffd600" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M8 12l2 2 4-4"/></svg>
        </div>
        <h5 class="card-title">Ventas</h5>
        <h2 class="fw-bold">{{ resumen.ventas }}</h2>
      </div>
    </div>
  </div>
</div>
<div class="row g-4">
  <div class="col-lg-4">
    <div class="card shadow-sm mb-4">
      <div class="card-header bg-light fw-bold">Productos más vendidos</div>
      <div class="card-body p-2">
        <table class="table table-sm mb-0">
          <thead><tr><th>Producto</th><th>Total vendido</th><th>Cantidad total</th></tr></thead>
          <tbody>
            {% for p in resumen.mas_vendidos %}
            <tr>
              <td>{{ p[0] }}</td><td>{{ p[1] }}</td><td>{{ p[2] }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div class="col-lg-4">
    <div class="card shadow-sm mb-4">
      <div class="card-header bg-light fw-bold">Últimas ventas</div>
      <div class="card-body p-2">
        <table class="table table-sm mb-0">
          <thead><tr><th>#</th><th>Producto</th><th>Fecha</th><th>Venta total</th></tr></thead>
          <tbody>
            {% for v in resumen.ultimas_ventas %}
            <tr>
              <td>{{ v[0] }}</td><td>{{ v[1] }}</td><td>{{ v[2].strftime('%Y-%m-%d') if v[2] else '' }}</td><td>${{ v[3] }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div class="col-lg-4">
    <div class="card shadow-sm mb-4">
      <div class="card-header bg-light fw-bold">Productos recientemente añadidos</div>
      <div class="card-body p-2">
        <ul class="list-group list-group-flush">
          {% for p in resumen.productos_recientes %}
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <span>
              <svg width="20" height="20" fill="none" stroke="#42a5f5" stroke-width="2" viewBox="0 0 24 24" style="vertical-align:middle;"><rect x="3" y="7" width="18" height="13" rx="2"/><path d="M16 3v4M8 3v4"/></svg>
              {{ p[0] }}
            </span>
            <span class="badge bg-primary">${{ p[1] }}</span>
          </li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </div>
</div>
{% endblock %} 